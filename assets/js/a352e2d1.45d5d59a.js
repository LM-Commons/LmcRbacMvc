"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7350],{3023:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var r=c(4848),s=c(8453);const a={sidebar_label:"From v3 to v4"},i="Upgrading from v3 to v4",o={id:"Upgrading/upgrade",title:"Upgrading from v3 to v4",description:"LmcRbacMvc v4 is a major upgrade with many breaking changes that prevent",source:"@site/versioned_docs/version-4.0/Upgrading/upgrade.md",sourceDirName:"Upgrading",slug:"/Upgrading/upgrade",permalink:"/LmcRbacMvc/docs/Upgrading/upgrade",draft:!1,unlisted:!1,editUrl:"https://github.com/lm-commons/lmcrbacmvc/tree/master/docs/versioned_docs/version-4.0/Upgrading/upgrade.md",tags:[],version:"4.0",frontMatter:{sidebar_label:"From v3 to v4"},sidebar:"tutorialSidebar",previous:{title:"Debugging Tools",permalink:"/LmcRbacMvc/docs/Guides/debugging"}},t={},d=[{value:"Namespace change",id:"namespace-change",level:3},{value:"Deprecations",id:"deprecations",level:3},{value:"Refactored and removed classes",id:"refactored-and-removed-classes",level:3},{value:"Factories",id:"factories",level:4},{value:"Role providers",id:"role-providers",level:4},{value:"Assertion",id:"assertion",level:4},{value:"Assertions refactoring",id:"assertions-refactoring",level:3}];function l(e){const n={code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"upgrading-from-v3-to-v4",children:"Upgrading from v3 to v4"})}),"\n",(0,r.jsx)(n.p,{children:"LmcRbacMvc v4 is a major upgrade with many breaking changes that prevent\nstraightforward upgrading."}),"\n",(0,r.jsx)(n.p,{children:"LmcRbacMvc v3 and LmcRbac v1 shared a lot of code. LmcRbacMvc v4 is now based\non LmcRbac v2 which was augmented such that common code is now part of LmcRbac.\nThis has rendered many components of LmcRbacMvc unnecessary and they are deprecated."}),"\n",(0,r.jsx)(n.p,{children:"In addition, LmcRbac v2 is now based on laminas-permissions-rbac's Role classes and interfaces."}),"\n",(0,r.jsx)(n.h3,{id:"namespace-change",children:"Namespace change"}),"\n",(0,r.jsx)(n.p,{children:"In an effort to In an effort to normalize LM-Commons components into a common Lmc namespace, the namespace has\nbeen refactored to Lmc\\Rbac\\Mvc."}),"\n",(0,r.jsxs)(n.p,{children:["Please update your code to replace ",(0,r.jsx)(n.code,{children:"LmcRbacMvc"})," by ",(0,r.jsx)(n.code,{children:"Lmc\\Rbac\\Mvc"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"deprecations",children:"Deprecations"}),"\n",(0,r.jsx)(n.p,{children:"The following components that were shared with LmcRbac are deprecated in LmcRbacMvc and should be replaced by their\nLmcRbac equivalent:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Exception\\ExceptionInterface"}),"\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Exception\\InvalidArgumentException"}),"\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Exception\\RoleNotFoundException"}),"\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Exception\\RuntimeException"}),"\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Permission\\PermissionInterface"}),"\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Identity\\IdentityInterface"}),"\n",(0,r.jsx)(n.li,{children:"Lmc\\Rbac\\Mvc\\Role\\RoleProviderInterface"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"refactored-and-removed-classes",children:"Refactored and removed classes"}),"\n",(0,r.jsx)(n.h4,{id:"factories",children:"Factories"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The factory classes were refactored from the ",(0,r.jsx)(n.code,{children:"LmcRbacMvc\\Factory"})," namespace to be colocated with\nthe service that the factory is creating. All the factories that were in ",(0,r.jsx)(n.code,{children:"LmcRbacMvc\\Factory"})," namespace have been\ndeleted."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"role-providers",children:"Role providers"}),"\n",(0,r.jsx)(n.p,{children:"The former LmcRbacMvc v3 role providers are no longer available and replaced by LmcRbac equivalent. LmcRbac will throw\nan exception if your config file still refers to them. In addition, the role provider plugin manager\nwas removed as it was not necessary."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["LmcRbacMvc\\Role\\RoleProviderPluginManager ",(0,r.jsx)(n.em,{children:"no longer used"})]}),"\n",(0,r.jsxs)(n.li,{children:["LmcRbacMvc\\Role\\InMemoryRoleProvider ",(0,r.jsx)(n.em,{children:"replaced by a LmcRbac equivalent"})]}),"\n",(0,r.jsxs)(n.li,{children:["LmcRbacMvc\\Role\\ObjectRepositoryRoleProvider ",(0,r.jsx)(n.em,{children:"replaced by a LmcRbac equivalent"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"assertion",children:"Assertion"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["LMcRbacMvc\\Assertion\\AssertionPluginManagerFactory ",(0,r.jsx)(n.em,{children:"no longer used"})]}),"\n",(0,r.jsxs)(n.li,{children:["LMcRbacMvc\\Assertion\\AssertionPluginManager ",(0,r.jsx)(n.em,{children:"no longer used"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"assertions-refactoring",children:"Assertions refactoring"}),"\n",(0,r.jsx)(n.p,{children:"LmcRbacMvc is now using LmcRbac assertions and assertion plugin manager instead of its own."}),"\n",(0,r.jsxs)(n.p,{children:["Therefore all previous assertions in LmcRbacMvc v3 must now implement the ",(0,r.jsx)(n.code,{children:"\\Lmc\\Rbac\\Assertion\\AssertionInterface"}),"\notherwise LmcRbac will throw an exception."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"\\Lmc\\Rbac\\Assertion\\AssertionInterface"})," is a more generic interface for asserting permissions. An assertion under this\ninterface will be passed the permission, identity and context whereas in LmcRbacMvc v3, the assertion is\npassed the AuthorizationService from which one had to get the identity. Having the permission as a parameter allows to\nreuse the same assertion to handle multiple permissions."]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,c)=>{c.d(n,{R:()=>i,x:()=>o});var r=c(6540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);